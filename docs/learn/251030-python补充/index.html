<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.151.0"><link rel="shortcut icon" type=image/x-icon href=/imgs/favicon.png><link rel=icon type=image/x-icon href=/imgs/favicon.png><link rel=icon type=image/png sizes=16x16 href=/imgs/favicon.png><link rel=icon type=image/png sizes=32x32 href=/imgs/favicon.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/favicon.png><meta itemprop=name content="251030-python补充"><meta itemprop=description content="清醒地停留，理智地前行。"><meta name=description content="清醒地停留，理智地前行。"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://ethanliu6.github.io/imgs/favicon.png"><meta itemprop=keywords content="python"><meta property="og:type" content="article"><meta property="og:title" content="251030-python补充"><meta property="og:description" content="清醒地停留，理智地前行。"><meta property="og:image" content="/imgs/favicon.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://ethanliu6.github.io/learn/251030-python%E8%A1%A5%E5%85%85/"><meta property="og:site_name" content="EthanLiu6's Blog"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="EthanLiu6"><meta property="article:published_time" content="2025-10-30 00:00:00 +0000 UTC"><meta property="article:modified_time" content="2025-10-30 00:00:00 +0000 UTC"><link type=text/css rel=stylesheet href=https://ethanliu6.github.io/js/3rd/font-awesome/6.7.2/css/all.min.css><link type=text/css rel=stylesheet href=https://ethanliu6.github.io/js/3rd/animate.css/3.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://ethanliu6.github.io/js/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href="/css/main.min.css?=1761917088"><style type=text/css>.post-footer hr:after{content:"~ 我可是有底线的哟 ~"}.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><link rel=stylesheet type=text/css href="/css/custom_style.css?=1761917088"><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return 0[0];const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),0[0]):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>251030-python补充 - EthanLiu6's Blog</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>EthanLiu6's Blog</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>点点滴滴，记录生活。</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>本站首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于作者</a></li><li class="menu-item menu-item-think"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-book hvr-icon"></i>我的感悟</a></li><li class="menu-item menu-item-learn"><a href=/learn/ class=hvr-icon-pulse rel=section><i class="fa fa-book-open hvr-icon"></i>我的学习</a></li><li class="menu-item menu-item-trophy"><a href=/categories/%E6%AF%94%E8%B5%9B/ class=hvr-icon-pulse rel=section><i class="fa fa-trophy hvr-icon"></i>我的比赛</a></li><li class="menu-item menu-item-gonguo"><a href=/gongguo/ class=hvr-icon-pulse rel=section><i class="fa fa-table-list hvr-icon"></i>我的功过</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>我的归档
<span class=badge>18</span></a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-list hvr-icon"></i>我的分类</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索内容</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索内容... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#异步>异步</a></li><li><a href=#协程>协程</a></li><li><a href=#事件循环>事件循环</a></li><li><a href=#ruff分析工具>Ruff分析工具</a></li><li><a href=#装饰器>装饰器</a></li><li><a href=#迭代器>迭代器</a></li><li><a href=#生成器>生成器</a></li><li><a href=#zip>zip</a></li><li><a href=#map>map</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=EthanLiu6 src=/imgs/img-lazy-loading.gif data-src=/imgs/favicon.png><p class=site-author-name itemprop=name>EthanLiu6</p><div class=site-description itemprop=description>清醒地停留，理智地前行。</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>18</span>
<span class=site-state-item-name>日志归档</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>6</span>
<span class=site-state-item-name>我的分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>我的标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/EthanLiu6 title="Github → https://github.com/EthanLiu6" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github
</a></span><span class=links-of-social-item><a href=https://space.bilibili.com/1327099977 title="Bilibili → https://space.bilibili.com/1327099977" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-bilibili fa-fw hvr-icon"></i>
Bilibili
</a></span><span class=links-of-social-item><a href=mailto:16693226842@163.com title="邮箱 → mailto:16693226842@163.com" rel=noopener class=hvr-icon-pulse target=_blank><i class="fa fa-envelope fa-fw hvr-icon"></i>
邮箱
</a></span><span class=links-of-social-item><a href=/imgs/wechat.png title="微信 → /imgs/wechat.png" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-weixin fa-fw hvr-icon"></i>
微信</a></span></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=goto-i18n-translate class=button title=多语言翻译><i class="fas fa-globe"></i></div><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/EthanLiu6 rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentColor" class="octo-body"/></svg></a><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://ethanliu6.github.io/learn/251030-python%E8%A1%A5%E5%85%85/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/favicon.png"><meta itemprop=name content="EthanLiu6"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="EthanLiu6"><meta itemprop=description content="清醒地停留，理智地前行。"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="251030-python补充"><meta itemprop=description content="
  python中的异步、事件循环、协程、Ruff分析工具
装饰器、迭代器、生成器、zip
"></span><header class=post-header><h1 class=post-title itemprop="name headline">251030-python补充
<a href=https://github.com/EthanLiu6/ethanliu6.github.io/tree/master/content/learn/251030-python%e8%a1%a5%e5%85%85.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2025年10月30日 00:00:00 +00:00" itemprop="dateCreated datePublished" datetime="2025-10-30 00:00:00 +0000 UTC">2025年10月30日
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/%E5%AD%A6%E4%B9%A0/ itemprop=url rel=index><span itemprop=name>学习</span></a></span></span></div><div class=post-meta-items></div></div></header><div class="post-body autonumber" itemprop=articleBody><blockquote class=blockquote-center>python中的异步、事件循环、协程、Ruff分析工具
装饰器、迭代器、生成器、zip</blockquote><a id=more></a><div class=post-alert-note><div class=post-alert-title><i class="fa-solid fa-bell"></i>
<span>NOTE</span></div><div class=post-alert-content></div></div><ul><li>事件循环：管理和调度异步任务的核心组件。</li><li>协程：使用 async def 定义的函数，可以在事件循环中异步运行。</li><li>任务：由事件循环调度的协程对象。</li><li>Future：表示一个异步操作的最终结果，类似于 JavaScript 中的 Promise。</li></ul><h2 id=异步>异步
<a class=header-anchor href=#%e5%bc%82%e6%ad%a5></a></h2><p>在 Python 中，将异步方法转换为同步协程可以通过 asyncio 库实现。这种转换通常用于在同步代码中调用异步函数，确保主线程不被阻塞。</p><p>Python中的异步编程的核心语法就是async/await两个关键字，主要涉及的概念就是协程（coroutine）。</p><h2 id=协程>协程
<a class=header-anchor href=#%e5%8d%8f%e7%a8%8b></a></h2><blockquote><p>尽量提前了解线程、进程、同步、异步、并行、并发
简单来说，协程就是在一个线程（thread）里通过事件循环（event loop）模拟出多个线程并发的效果。</p></blockquote><blockquote><p>关于协程（coroutine）</p></blockquote><ul><li><ol><li>使用async def定义的函数是一个coroutine，这个函数内部可以用await关键字。</li></ol></li><li><ol start=2><li>使用async def定义的函数，调用之后返回的值，是一个coroutine对象，可以被用于await或者asyncio.run等</li></ol></li></ul><p>Python 引入了 async/await 语法来支持异步编程。当我们在函数定义前加上 async 关键字时，这个函数就变成了一个"协程"（coroutine）。而 await 关键字则用于等待一个协程完成。让我们改写上面的代码：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span><span class=lnt id=hl-0-12><a class=lnlinks href=#hl-0-12>12</a>
</span><span class=lnt id=hl-0-13><a class=lnlinks href=#hl-0-13>13</a>
</span><span class=lnt id=hl-0-14><a class=lnlinks href=#hl-0-14>14</a>
</span><span class=lnt id=hl-0-15><a class=lnlinks href=#hl-0-15>15</a>
</span><span class=lnt id=hl-0-16><a class=lnlinks href=#hl-0-16>16</a>
</span><span class=lnt id=hl-0-17><a class=lnlinks href=#hl-0-17>17</a>
</span><span class=lnt id=hl-0-18><a class=lnlinks href=#hl-0-18>18</a>
</span><span class=lnt id=hl-0-19><a class=lnlinks href=#hl-0-19>19</a>
</span><span class=lnt id=hl-0-20><a class=lnlinks href=#hl-0-20>20</a>
</span><span class=lnt id=hl-0-21><a class=lnlinks href=#hl-0-21>21</a>
</span><span class=lnt id=hl-0-22><a class=lnlinks href=#hl-0-22>22</a>
</span><span class=lnt id=hl-0-23><a class=lnlinks href=#hl-0-23>23</a>
</span><span class=lnt id=hl-0-24><a class=lnlinks href=#hl-0-24>24</a>
</span><span class=lnt id=hl-0-25><a class=lnlinks href=#hl-0-25>25</a>
</span><span class=lnt id=hl-0-26><a class=lnlinks href=#hl-0-26>26</a>
</span><span class=lnt id=hl-0-27><a class=lnlinks href=#hl-0-27>27</a>
</span><span class=lnt id=hl-0-28><a class=lnlinks href=#hl-0-28>28</a>
</span><span class=lnt id=hl-0-29><a class=lnlinks href=#hl-0-29>29</a>
</span><span class=lnt id=hl-0-30><a class=lnlinks href=#hl-0-30>30</a>
</span><span class=lnt id=hl-0-31><a class=lnlinks href=#hl-0-31>31</a>
</span><span class=lnt id=hl-0-32><a class=lnlinks href=#hl-0-32>32</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>asyncio</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>random</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>time</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>process_item</span><span class=p>(</span><span class=n>item</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;处理中：</span><span class=si>{</span><span class=n>item</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=c1># async 定义的函数变成了协程</span>
</span></span><span class=line><span class=cl>    <span class=n>process_time</span> <span class=o>=</span> <span class=n>random</span><span class=o>.</span><span class=n>uniform</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>process_time</span><span class=p>)</span>  <span class=c1># await 等待异步操作完成，说明这个seleep也是个协程</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=sa>f</span><span class=s2>&#34;处理完成：</span><span class=si>{</span><span class=n>item</span><span class=si>}</span><span class=s2>，耗时 </span><span class=si>{</span><span class=n>process_time</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> 秒&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>process_all_items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>items</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;任务A&#34;</span><span class=p>,</span> <span class=s2>&#34;任务B&#34;</span><span class=p>,</span> <span class=s2>&#34;任务C&#34;</span><span class=p>,</span> <span class=s2>&#34;任务D&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=c1># 创建任务列表</span>
</span></span><span class=line><span class=cl>    <span class=n>tasks</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=n>asyncio</span><span class=o>.</span><span class=n>create_task</span><span class=p>(</span><span class=n>process_item</span><span class=p>(</span><span class=n>item</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span>
</span></span><span class=line><span class=cl>    <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;开始处理&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>asyncio</span><span class=o>.</span><span class=n>gather</span><span class=p>(</span><span class=o>*</span><span class=n>tasks</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>results</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=n>start</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>results</span> <span class=o>=</span> <span class=k>await</span> <span class=n>process_all_items</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>end</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>results</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;总耗时：</span><span class=si>{</span><span class=n>end</span> <span class=o>-</span> <span class=n>start</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2> 秒&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&#34;__main__&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>asyncio</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=n>main</span><span class=p>())</span></span></span></code></pre></td></tr></table></div></div><h2 id=事件循环>事件循环
<a class=header-anchor href=#%e4%ba%8b%e4%bb%b6%e5%be%aa%e7%8e%af></a></h2><p>事件循环是一个设计模式，用于在单线程中处理多个并发任务。它不断地检查是否有待处理的事件，并调用相应的回调函数。</p><h2 id=ruff分析工具>Ruff分析工具
<a class=header-anchor href=#ruff%e5%88%86%e6%9e%90%e5%b7%a5%e5%85%b7></a></h2><p>是一个python代码检查工具，可以高效检查代码规范，比如类型问题、导入不用的包等等</p><h2 id=装饰器>装饰器
<a class=header-anchor href=#%e8%a3%85%e9%a5%b0%e5%99%a8></a></h2><blockquote><p>用来修改或增强函数的行为
由于函数也是一个对象，而且函数对象可以被赋值给变量，所以，通过变量也能调用该函数。</p></blockquote><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>test</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;hello world&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>f</span> <span class=o>=</span> <span class=n>test</span>
</span></span><span class=line><span class=cl><span class=n>f</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>函数对象都有个<code>__main__</code>属性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span><span class=lnt id=hl-2-2><a class=lnlinks href=#hl-2-2>2</a>
</span><span class=lnt id=hl-2-3><a class=lnlinks href=#hl-2-3>3</a>
</span><span class=lnt id=hl-2-4><a class=lnlinks href=#hl-2-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>test</span><span class=o>.</span><span class=vm>__name__</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;test&#39;</span>
</span></span><span class=line><span class=cl><span class=o>&gt;&gt;&gt;</span> <span class=n>f</span><span class=o>.</span><span class=vm>__name__</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;test&#39;</span></span></span></code></pre></td></tr></table></div></div><p>现在，假设我们要增强test()函数的功能，比如，在函数调用前后自动打印日志，但又不希望修改test()函数的定义，这种在代码运行期间动态增加功能的方式，称之为“装饰器”（Decorator）。
例如我们要实现一个日志装饰器（想在函数调用的时候打印一些日志）：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1> 1</a>
</span><span class=lnt id=hl-3-2><a class=lnlinks href=#hl-3-2> 2</a>
</span><span class=lnt id=hl-3-3><a class=lnlinks href=#hl-3-3> 3</a>
</span><span class=lnt id=hl-3-4><a class=lnlinks href=#hl-3-4> 4</a>
</span><span class=lnt id=hl-3-5><a class=lnlinks href=#hl-3-5> 5</a>
</span><span class=lnt id=hl-3-6><a class=lnlinks href=#hl-3-6> 6</a>
</span><span class=lnt id=hl-3-7><a class=lnlinks href=#hl-3-7> 7</a>
</span><span class=lnt id=hl-3-8><a class=lnlinks href=#hl-3-8> 8</a>
</span><span class=lnt id=hl-3-9><a class=lnlinks href=#hl-3-9> 9</a>
</span><span class=lnt id=hl-3-10><a class=lnlinks href=#hl-3-10>10</a>
</span><span class=lnt id=hl-3-11><a class=lnlinks href=#hl-3-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>log</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>inner</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kws</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;调用</span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2>函数的一些日志信息……&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kws</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>inner</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@log</span>  <span class=c1># 等价于 now = log(now)</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>now</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;2024-6-1&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>now</span><span class=p>()</span></span></span></code></pre></td></tr></table></div></div><p>其实这种就是一种闭包，所以装饰器是伴随着闭包的
闭包主要就三点：</p><ul><li><ol><li>内外嵌套</li></ol></li><li><ol start=2><li>内调用外（也可使用外属性、变量）</li></ol></li><li><ol start=3><li>外返回内</li></ol></li></ul><h2 id=迭代器>迭代器
<a class=header-anchor href=#%e8%bf%ad%e4%bb%a3%e5%99%a8></a></h2><blockquote><p>实现__iter__()和__next__()其实就是实现了一个迭代器，可被用于迭代操作（仅仅一次）
<strong>iter</strong>()：返回迭代器对象本身
<strong>next</strong>()：返回下一个元素，没有元素时抛出 StopIteration</p></blockquote><h2 id=生成器>生成器
<a class=header-anchor href=#%e7%94%9f%e6%88%90%e5%99%a8></a></h2><p>生成器的核心原理是 yield 关键字实现的“暂停和恢复”机制。它将一个普通的函数转变为一个可以记住自身状态的生产者，实现了：</p><ul><li>惰性求值：按需生成，极大节省内存。</li><li>流式处理：非常适合处理数据流、大文件和无限序列。</li><li>协同程序：通过 .send() 等方法，可以实现简单的双向通信，是 Python 中协程和异步编程的基础。</li></ul><blockquote><p>上面这个之前又被在面试中问到过，还有异步编程中的协程</p></blockquote><blockquote><p>迭代器和生成器都只能遍历一次哦，内存高效型</p></blockquote><h2 id=zip>zip
<a class=header-anchor href=#zip></a></h2><p>-zip对象本质上是个迭代器对象</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span><span class=lnt id=hl-4-4><a class=lnlinks href=#hl-4-4>4</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>names</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;Alice&#39;</span><span class=p>,</span> <span class=s1>&#39;Bob&#39;</span><span class=p>,</span> <span class=s1>&#39;Charlie&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>ages</span> <span class=o>=</span> <span class=p>[</span><span class=mi>25</span><span class=p>,</span> <span class=mi>30</span><span class=p>,</span> <span class=mi>35</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>zipped</span> <span class=o>=</span> <span class=nb>zip</span><span class=p>(</span><span class=n>names</span><span class=p>,</span> <span class=n>ages</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>zipped</span><span class=p>)</span> </span></span></code></pre></td></tr></table></div></div><h2 id=map>map
<a class=header-anchor href=#map></a></h2><p>map() 函数将一个函数应用于一个或多个可迭代对象中的所有元素，并返回一个 map 对象（迭代器）。
可以与lambda配合使用</p></div><footer class=post-footer><div class=post-tags><a href=/tags/python/>python</a></div><div class=post-share-tools><div class=post-share-loading><i class="fa-solid fa-ellipsis fa-spin"></i></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"></div></div><hr><div class=reward-container><div></div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="EthanLiu6 - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="EthanLiu6 - 微信">
<span>微信</span></div></div></div><div class=post-nav><div class="post-nav-next post-nav-item"></div><div class="post-nav-prev post-nav-item"><a href=/learn/251028-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%9D%82%E5%AD%A6/ rel=prev title=251028-大模型杂学>251028-大模型杂学
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div id=i18n-translate class=i18n-translate><i class="fa fa-language"></i><div id=lang-select class=lang-select><div id=lang-selected class=selected-option><span class="flag-icon flag-icon-zh-cn"></span>
<span class=selected-language>简体中文</span>
<i class="fa fa-chevron-down"></i></div><div id=lang-options class=lang-options><div class=lang-option lang-code=zh-cn lang-name=简体中文 lang-url=/learn/251030-python%E8%A1%A5%E5%85%85/><span class="flag-icon flag-icon-zh-cn"></span>
<span class=lang-name>简体中文</span></div></div></div></div><div class=copyright>&copy;
<span itemprop=copyrightYear>2023 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>EthanLiu6</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.151.0 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.8.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div></div></footer><script class=next-config data-name=page type=application/json>{"clipboard":{"js":{"alias":"clipboard","file":"dist/clipboard.min.js","name":"clipboard.js","version":"2.0.11"}},"comments":false,"expired":false,"isHome":false,"isPage":true,"path":"251030-python%E8%A1%A5%E5%85%85","permalink":"https://ethanliu6.github.io/learn/251030-python%E8%A1%A5%E5%85%85/","title":"251030-python补充","toc":true,"waline":{"commentcnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}}}</script><script type=text/javascript src=https://ethanliu6.github.io/js/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://ethanliu6.github.io/js/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"hostname":"https://ethanliu6.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索内容..."},"isMultiLang":true,"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"slideInRight","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":false,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-CN","num":8},"enable":true},"sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://ethanliu6.github.io/js/3rd"}},"version":"4.8.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src="/js/main.min.js?=1761917088" defer></script><script type=text/javascript src="/js/clipboard.min.js?=1761917088" defer></script></body></html>